<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>اتحاد طب بشري كفر الشيخ</title>

<!-- ===== Theme v3 (No‑Blue • Emerald + Amber) ===== -->
<style>
:root{
  --bg1:#0e0f11; --bg2:#121316;
  --card:rgba(255,255,255,.05);
  --txt:#f2f3f4; --mut:#a9adb3; --bor:rgba(255,255,255,.10);
  --ring:rgba(16,185,129,.35);
  --acc1:#10b981; --acc2:#f59e0b;            /* Emerald + Amber */
  --shadow:0 10px 30px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.04);
  --radius-xl:18px; --radius-lg:14px; --radius-md:12px;
  --pad:14px; --gap:10px; --blur:10px;
}
:root.light{
  --bg1:#fbfbfb; --bg2:#ffffff;
  --card:rgba(255,255,255,.92);
  --txt:#171717; --mut:#5b6066; --bor:rgba(0,0,0,.08);
  --ring:rgba(245,158,11,.35);
  --acc1:#16a34a; --acc2:#ea580c;
  --shadow:0 10px 30px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.9);
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; font:15.5px/1.75 ui-rounded,system-ui,Segoe UI,Arial;
  color:var(--txt);
  background:linear-gradient(160deg,var(--bg1),var(--bg2)) fixed;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:20;
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 16px;
  background:linear-gradient(160deg,rgba(0,0,0,.28),rgba(0,0,0,.12));
  backdrop-filter:blur(var(--blur));
  border-bottom:1px solid var(--bor);
}
.brand{font-weight:800; letter-spacing:.2px}
.badge{border:1px solid var(--bor); border-radius:999px; padding:4px 10px;
  background:rgba(255,255,255,.06); color:var(--mut); font-size:12px}

/* Layout */
.container{max-width:960px; margin:0 auto; padding:16px}
.view.hidden{display:none}

/* Cards */
.card{
  background:var(--card); border:1px solid var(--bor); border-radius:var(--radius-xl);
  padding:var(--pad); box-shadow:var(--shadow); backdrop-filter:blur(var(--blur));
  transition:transform .12s, box-shadow .2s, border-color .2s;
}
.card:hover{transform:translateY(-1px)}
.separator{height:1px;background:var(--bor);margin:10px 0;border-radius:999px}

/* Grid */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:var(--gap)}
@media(max-width:760px){.grid{grid-template-columns:1fr}}

/* Inputs & Buttons */
textarea,input,select,button{
  border:1px solid var(--bor); border-radius:var(--radius-md);
  background:rgba(0,0,0,.18); color:var(--txt); padding:10px 12px; outline:none;
  transition:border-color .15s, box-shadow .15s, background .2s;
}
textarea{min-height:100px; resize:vertical}
input:focus,textarea:focus,select:focus{
  border-color:color-mix(in srgb,var(--acc1) 45%,#000);
  box-shadow:0 0 0 4px var(--ring);
}
button{
  cursor:pointer; border-radius:var(--radius-lg); font-weight:600;
  background:linear-gradient(135deg,
    color-mix(in srgb,var(--acc1) 55%, transparent),
    color-mix(in srgb,var(--acc2) 45%, transparent));
  color:#fff; border:1px solid var(--bor); padding:10px 14px;
  box-shadow:0 6px 20px rgba(0,0,0,.18);
}
button:hover{filter:brightness(1.04)} button:active{transform:translateY(1px)}
button.ghost{background:rgba(255,255,255,.04); color:var(--txt)}
.muted{color:var(--mut); font-size:12.5px}
.row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}

/* Bottom nav */
.bottom{
  position:sticky; bottom:0; z-index:15;
  display:flex; justify-content:space-around; gap:10px;
  padding:12px;
  background:linear-gradient(0deg,rgba(0,0,0,.28),rgba(0,0,0,.12));
  border-top:1px solid var(--bor); backdrop-filter:blur(var(--blur));
}
.bottom button{flex:1; text-align:center}
.bottom .active{box-shadow:0 0 0 3px var(--ring) inset}

/* Small ui bits */
.kbd{background:rgba(255,255,255,.06);border:1px solid var(--bor);
  border-radius:8px;padding:2px 6px;font-size:12px;color:var(--mut)}
h1,h2,h3{margin:.2rem 0 .6rem} h2{font-size:1.35rem}
</style>
</head>
<body>

<!-- ===== Top bar ===== -->
<header class="topbar">
  <div class="brand">اتحاد طب بشري كفر الشيخ</div>
  <div class="badge" id="statusBadge">Step 1</div>
</header>

<!-- ===== Views ===== -->
<main class="container">

  <!-- عام -->
  <section id="view-home" class="view">
    <div class="card">
      <div style="display:flex;align-items:center;gap:14px">
        <div style="font-size:40px">🧱</div>
        <div>
          <h2 style="margin:0 0 6px">جاهزين</h2>
          <p style="margin:0">
            نسخة البداية للتأكد إن <b>GitHub Pages</b> شغّال. دلوقتي ربطنا Firebase كمان،
            وبعدها هنضيف تسجيل الدخول، البوستات، البروفايل، QR… إلخ.
          </p>
          <div class="separator"></div>
          <p class="muted" style="margin:0">
            لو الشارة فوق بقت <span class="kbd">✓ Firebase مرتبط</span> يبقى الربط نجح.
          </p>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="grid">
        <div>
          <label class="muted">حجم النص</label>
          <select id="fontSizeSel">
            <option value="15.5">افتراضي</option>
            <option value="16">كبير</option>
            <option value="17">أكبر</option>
          </select>
        </div>
        <div>
          <label class="muted">الوضع</label><br/>
          <button id="themeToggle" class="ghost">تبديل ليلي/نهاري</button>
        </div>
      </div>
      <p class="muted" style="margin:.6rem 0 0">
        * الاختيارات تتخزّن محليًا — الوظائف المتقدمة هنفعلها بعد تسجيل الدخول.
      </p>
    </div>

    <div class="card">
      <h3 style="margin-top:0">بوستات عامة (placeholder)</h3>
      <div class="list" id="publicPosts">
        <div class="post">🎉 مثال: إعلان ندوة تعريفية — <span class="muted">سيتم استبداله لاحقًا ببيانات حقيقية</span></div>
        <div class="post">🗓️ مثال: فعالية رياضية داخلية — <span class="muted">placeholder</span></div>
      </div>
    </div>
  </section>

  <!-- بروفايل -->
  <section id="view-profile" class="view hidden">
    <div class="card">
      <h2 style="margin-top:0">بروفايل</h2>
      <div class="grid">
        <div>
          <label class="muted">الاسم</label>
          <input id="pName" placeholder="—">
        </div>
        <div>
          <label class="muted">البريد</label>
          <input id="pEmail" placeholder="—">
        </div>
        <div>
          <label class="muted">العمر</label>
          <input id="pAge" type="number" min="16" max="100" placeholder="—">
        </div>
        <div>
          <label class="muted">رقم الدفعة</label>
          <input id="pBatch" placeholder="—">
        </div>
      </div>
      <div class="row" style="margin-top:10px">
        <button class="ghost" id="btnSaveProfile">حفظ (محليًا الآن)</button>
      </div>
      <p class="muted" style="margin:.6rem 0 0">
        * في مرحلة تسجيل الدخول هنربط البيانات دي بحساب المستخدم.
      </p>
    </div>
  </section>

  <!-- إعدادات -->
  <section id="view-settings" class="view hidden">
    <div class="card">
      <h2 style="margin-top:0">إعدادات</h2>
      <div class="grid">
        <div>
          <label class="muted">اللغة</label>
          <select id="langSel">
            <option value="ar">العربية</option>
            <option value="en">English</option>
            <option value="es">Español</option>
            <option value="fr">Français</option>
            <option value="de">Deutsch</option>
          </select>
        </div>
        <div>
          <label class="muted">تخصيص</label><br/>
          <button class="ghost" id="btnClearLocal">مسح تفضيلات الجهاز</button>
        </div>
      </div>
      <p class="muted" style="margin:.6rem 0 0">
        * لاحقًا هنضيف لوحة المشرف، والموافقة على الحسابات، ومسح QR للحضور.
      </p>
    </div>
  </section>

</main>

<!-- ===== Bottom nav ===== -->
<nav class="bottom">
  <button class="active" data-view="view-home">🏠 عام</button>
  <button data-view="view-profile">👤 بروفايل</button>
  <button data-view="view-settings">⚙️ إعدادات</button>
</nav>

<!-- ===== Client JS (theme + nav + local prefs) ===== -->
<script>
(function(){
  // theme boot
  const t=localStorage.getItem('theme'); if(t==='light') document.documentElement.classList.add('light');

  // font size
  const sel=document.getElementById('fontSizeSel');
  if(sel){
    const fs=localStorage.getItem('fs'); if(fs){document.body.style.fontSize=fs+'px'; sel.value=fs;}
    sel.onchange=()=>{document.body.style.fontSize=sel.value+'px'; localStorage.setItem('fs',sel.value);};
  }

  // toggle theme
  const tg=document.getElementById('themeToggle');
  if(tg){tg.onclick=()=>{const isLight=document.documentElement.classList.toggle('light');
    localStorage.setItem('theme', isLight ? 'light':'dark');};}

  // bottom nav routing
  const buttons=document.querySelectorAll('.bottom button');
  const views=document.querySelectorAll('.view');
  function show(id){
    views.forEach(v=>v.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
    buttons.forEach(b=>b.classList.toggle('active', b.dataset.view===id));
  }
  buttons.forEach(b=>b.addEventListener('click',()=>show(b.dataset.view)));
  show('view-home');

  // profile local save (placeholder)
  const save=document.getElementById('btnSaveProfile');
  if(save){
    save.onclick=()=>{
      const data={
        name:document.getElementById('pName').value||'',
        email:document.getElementById('pEmail').value||'',
        age:document.getElementById('pAge').value||'',
        batch:document.getElementById('pBatch').value||''
      };
      localStorage.setItem('profileDraft', JSON.stringify(data));
      save.textContent='✅ تم الحفظ محليًا';
      setTimeout(()=>save.textContent='حفظ (محليًا الآن)',1500);
    };
    // load draft if exists
    const draft=localStorage.getItem('profileDraft');
    if(draft){
      const d=JSON.parse(draft);
      ['pName','pEmail','pAge','pBatch'].forEach(id=>{ if(d[id.slice(1).toLowerCase()]) document.getElementById(id).value=d[id.slice(1).toLowerCase()]; });
    }
  }

  // clear local prefs
  const clr=document.getElementById('btnClearLocal');
  if(clr){clr.onclick=()=>{localStorage.clear(); location.reload();};}
})();
</script>

<!-- ===== Firebase (Compat SDKs) ===== -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

<script>
/* مفاتيح مشروعك (من Firebase Console) */
const firebaseConfig = {
  apiKey: "AIzaSyDfiO-4J0DIHSKZo_vdBXeS343eJ0x4pYo",
  authDomain: "ittihad-med-kfs.firebaseapp.com",
  projectId: "ittihad-med-kfs",
  appId: "1:323302922960:web:3343605d75d2a5147cdcd5"
};

/* تهيئة + اختبار كتابة مستند */
(function(){
  const badge = document.getElementById('statusBadge');
  try{
    firebase.initializeApp(firebaseConfig);
    const db=firebase.firestore();
    if(badge) badge.textContent='… جاري ربط Firebase';
    db.collection('ping').doc('hello').set({time:new Date().toISOString(), page:location.href})
      .then(()=>{ if(badge){badge.textContent='✓ Firebase مرتبط';} console.log('Firestore write OK'); })
      .catch(e=>{ if(badge){badge.textContent='⚠️ Firestore error';} alert('Firestore error: '+e.message); console.error(e); });
  }catch(e){
    if(badge) badge.textContent='⚠️ Init error';
    alert('Firebase init error: '+(e.message||e));
    console.error(e);
  }
})();
</script>

</body>
        </html>
